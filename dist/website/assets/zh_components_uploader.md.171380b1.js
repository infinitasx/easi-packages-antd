import{_ as t,c as e,b as n,d as a,j as s,l,a as d}from"./app.4c4007bd.js";const r='{"title":"EASIUploader - 图片选择器","description":"","frontmatter":{},"headers":[{"level":2,"title":"Props","slug":"props"},{"level":2,"title":"Types","slug":"types"},{"level":2,"title":"事件","slug":"事件"},{"level":2,"title":"插槽","slug":"插槽"}],"relativePath":"zh/components/uploader.md","lastUpdated":1634106744976}',i={},c=a("h1",{id:"easiuploader-图片选择器",tabindex:"-1"},[s("EASIUploader - 图片选择器 "),a("a",{class:"header-anchor",href:"#easiuploader-图片选择器","aria-hidden":"true"},"#")],-1),p=l('<h2 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-hidden="true">#</a></h2><table><thead><tr><th style="text-align:center;">props</th><th style="text-align:center;">type</th><th style="text-align:center;">default</th><th style="text-align:center;">required</th><th>remark</th></tr></thead><tbody><tr><td style="text-align:center;">system</td><td style="text-align:center;">string</td><td style="text-align:center;"></td><td style="text-align:center;">是</td><td>系统在 IAM 内的标示，例如 IAM 系统标示为 iam，可咨询后端系统具体标示</td></tr><tr><td style="text-align:center;">authorization</td><td style="text-align:center;">string or function</td><td style="text-align:center;"></td><td style="text-align:center;">是</td><td>IAM 下发的 token，格式为 Bearer <strong>**</strong></td></tr><tr><td style="text-align:center;">env</td><td style="text-align:center;">development or production</td><td style="text-align:center;"></td><td style="text-align:center;">是</td><td>默认取 window.$EASI_BUILD_ENV 的值</td></tr><tr><td style="text-align:center;">multiple</td><td style="text-align:center;">boolean or number</td><td style="text-align:center;">false</td><td style="text-align:center;">否</td><td>可以上传/选择的图片数量，为 true 时，不限制数量，为 false 或 1 时只能上传/选择一张图片，为 0 时不可上传/选择图片</td></tr><tr><td style="text-align:center;">maxFilesSize</td><td style="text-align:center;">number</td><td style="text-align:center;">5</td><td style="text-align:center;">否</td><td>单张图片上传内存大小限制，单位 M，默认不超过 5M</td></tr><tr><td style="text-align:center;">disabled</td><td style="text-align:center;">boolean</td><td style="text-align:center;">false</td><td style="text-align:center;">否</td><td>禁用图片选择器</td></tr><tr><td style="text-align:center;">crop</td><td style="text-align:center;">boolean</td><td style="text-align:center;">true</td><td style="text-align:center;">否</td><td>图片是否可裁剪，默认可裁剪，gif 图片不能使用裁剪功能</td></tr><tr><td style="text-align:center;">maxWidth</td><td style="text-align:center;">number</td><td style="text-align:center;">2000</td><td style="text-align:center;">否</td><td>图片最大宽度，如果选择的图片超过此值，会按比例压缩宽度到此值，gif 不受此约束，默认最大 2000px</td></tr><tr><td style="text-align:center;">maxHeight</td><td style="text-align:center;">number</td><td style="text-align:center;">2000</td><td style="text-align:center;">否</td><td>图片最大高度，如果选择的图片超过此值，会按比例压缩高度到此值，gif 不受此约束，默认最大 2000px</td></tr><tr><td style="text-align:center;">aspectRatio</td><td style="text-align:center;">number</td><td style="text-align:center;">0</td><td style="text-align:center;">否</td><td>裁剪图片的宽高比，如果不限制宽高比则不传入此值，或传入 0，如果想要正方形图片可传入 1，传入的值应是宽度除以高度的结果，例如想要宽高比 3：2 的尺寸，则传入 3/2 的结果</td></tr><tr><td style="text-align:center;">minCropBoxWidth</td><td style="text-align:center;">number</td><td style="text-align:center;">0</td><td style="text-align:center;">否</td><td>可裁剪到的最小宽度，传 0 不限制</td></tr><tr><td style="text-align:center;">minCropBoxHeight</td><td style="text-align:center;">number</td><td style="text-align:center;">0</td><td style="text-align:center;">否</td><td>可裁剪到的最小高度，传 0 不限制</td></tr><tr><td style="text-align:center;">timeout</td><td style="text-align:center;">number</td><td style="text-align:center;">20000</td><td style="text-align:center;">否</td><td>上传超时时间，默认 20 秒，单位毫秒</td></tr><tr><td style="text-align:center;">emptyTitle</td><td style="text-align:center;">string</td><td style="text-align:center;">点击或将图片拖拽到这里上传</td><td style="text-align:center;">否</td><td>本地上传无图片的时候空状态的标题</td></tr><tr><td style="text-align:center;">emptySubTitle</td><td style="text-align:center;">string</td><td style="text-align:center;">支持扩展名：.jpg、.jpeg、.png、.webp、.gif 等</td><td style="text-align:center;">否</td><td>本地上传无图片的时候空状态的二级标题</td></tr><tr><td style="text-align:center;">v-model:visible</td><td style="text-align:center;">boolean</td><td style="text-align:center;"></td><td style="text-align:center;">否</td><td>如果写入了 slot#default 插槽，则由插槽内的 dom 自动触发显示</td></tr><tr><td style="text-align:center;">maskClosable</td><td style="text-align:center;">boolean</td><td style="text-align:center;">false</td><td style="text-align:center;">否</td><td>点击蒙层是否可以关闭文件选择器，默认不可以</td></tr><tr><td style="text-align:center;">destroyOnClose</td><td style="text-align:center;">boolean</td><td style="text-align:center;">true</td><td style="text-align:center;">否</td><td>关闭文件选择器是否清除内部状态，默认要清除</td></tr><tr><td style="text-align:center;">title</td><td style="text-align:center;">string</td><td style="text-align:center;">上传图片</td><td style="text-align:center;">否</td><td>文件选择器弹框的标题</td></tr><tr><td style="text-align:center;">extType</td><td style="text-align:center;">string[]</td><td style="text-align:center;">[&#39;jpg&#39;, &#39;png&#39;, &#39;webp&#39;, &#39;jpeg&#39;, &#39;gif&#39;, &#39;tif&#39;, &#39;tiff&#39;]</td><td style="text-align:center;">否</td><td>允许上传的文件后缀，主要是为了防止拖动上传时可以跳过 accept 校验</td></tr><tr><td style="text-align:center;">accept</td><td style="text-align:center;">string[]</td><td style="text-align:center;">[&#39;image/gif&#39;,&#39;image/jpeg&#39;,&#39;image/png&#39;,&#39;image/tiff&#39;,&#39;image/webp&#39;]</td><td style="text-align:center;">否</td><td>input 输入框的 accept 参数,限制文件类型</td></tr></tbody></table><h2 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-hidden="true">#</a></h2><div class="language-Typescript"><pre><code><span class="token keyword">type</span> <span class="token class-name">FileList</span> <span class="token operator">=</span> File<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 文件数组</span>\n\n<span class="token comment">// FILE_TYPE_ERROR: 文件类型或后缀校验失败</span>\n<span class="token comment">// FILE_MAX_COUNT: 选择的文件超过数量限制</span>\n<span class="token comment">// FILE_MIN_WITH_HEIGHT：待上传的文件宽高小于最小宽高</span>\n<span class="token comment">// FILE_UPLOAD_ERROR: 上传文件失败，可能原因是接口超时，token失效</span>\n<span class="token comment">// FILE_LIST_ERROR： 获取图片库数据失败，可能原因是接口超时，token失效</span>\n<span class="token comment">// fileList有可能为空数组</span>\n<span class="token keyword">interface</span> <span class="token class-name">IValidateError</span><span class="token punctuation">{</span>\n  code<span class="token operator">:</span> <span class="token string">&#39;FILE_TYPE_ERROR&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;FILE_MAX_COUNT&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;FILE_MAX_SIZE&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;FILE_MIN_WITH_HEIGHT&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;FILE_UPLOAD_ERROR&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;FILE_LIST_ERROR&#39;</span><span class="token punctuation">;</span>\n  message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n  fileList<span class="token operator">:</span> FileList<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">interface</span> <span class="token class-name">ISelect</span> <span class="token punctuation">{</span>\n  url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 已选择的图片链接</span>\n  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 已选择的图片文件名</span>\n  size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 已选择的图片内存大小，单位字节</span>\n  width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 已选择图片的真实宽度</span>\n  height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 已选择图片的真实高度</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-hidden="true">#</a></h2><table><thead><tr><th style="text-align:center;">event name</th><th style="text-align:center;">params</th><th style="text-align:center;">return value</th><th>remark</th></tr></thead><tbody><tr><td style="text-align:center;">show</td><td style="text-align:center;"></td><td style="text-align:center;">void</td><td>显示文件选择器弹框事件</td></tr><tr><td style="text-align:center;">cancel</td><td style="text-align:center;"></td><td style="text-align:center;">void</td><td>关闭文件选择器弹框事件</td></tr><tr><td style="text-align:center;">change</td><td style="text-align:center;"></td><td style="text-align:center;">FileList</td><td>本地上传选择文件事件</td></tr><tr><td style="text-align:center;">error</td><td style="text-align:center;"></td><td style="text-align:center;">IValidateError</td><td>包含接口调用失败，文件校验失败事件</td></tr><tr><td style="text-align:center;">ok</td><td style="text-align:center;"></td><td style="text-align:center;">ISelect[]</td><td>用户确认选择事件，调用方应监听此事件获取用户选择的图片</td></tr></tbody></table><h2 id="插槽" tabindex="-1">插槽 <a class="header-anchor" href="#插槽" aria-hidden="true">#</a></h2><p>未在下面特别说明的则与 ant-design-vue v2.2.2 <a href="https://2x.antdv.com/components/table-cn" target="_blank" rel="noopener noreferrer">Table 组件</a> 一致</p><table><thead><tr><th style="text-align:center;">name</th><th>remark</th></tr></thead><tbody><tr><td style="text-align:center;">default</td><td>触发文件选择器弹框的插槽，插槽内容必须要有 root dom。不写此插槽，也可以通过 v-model:visible 控制弹框显示隐藏</td></tr></tbody></table>',9);var o=t(i,[["render",function(t,a,s,l,r,i){return d(),e("div",null,[c,n(" :::demo\nuploader/index\n::: "),p])}]]);export{r as __pageData,o as default};
